
<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <style>
      .btn-primary {
        color: #fff;
        background-color: #10366e;
        border-color: #060f1c;
      }
      .btn-check:focus + .btn-primary,
      .btn-primary:focus {
        color: #fff;
        background-color: #10366e;
        border-color: #10366e;
        box-shadow: 0 0 0 0.25rem rgb(49 132 253 / 50%);
      }
      .btn-primary:hover {
        color: #fff;
        background-color: #10366e;
        border-color: #0a58ca;
      }
      a {
        color: #10366e;
      }
    </style>
    <title>Pretify JSON</title>
  </head>
  <body style="background-color: aliceblue">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-1"></div>
        <div class="col-md-10">
          <div class="d-flex bd-highlight">
            <div class="p-2 flex-grow-1 bd-highlight">
              <div class="container">
                <h3
                  class="fw-bold"
                  contenteditable="true"
                  id="header"
                  spellcheck="false"
                >
                  Pretify JSON
                </h3>
                <p contenteditable="true" class="col-md-8 fs-4">
                  Make your JSON Prettier !! üòâ
                </p>
              </div>
            </div>
            <div class="p-2 bd-highlight">
              <button class="btn btn-primary" type="button" id="btn-download">
                Download
              </button>
            </div>
            <div class="p-2 bd-highlight">
              <button class="btn btn-secondary" type="button" id="btncopy">
                Copy
              </button>
            </div>
            <div class="p-2 bd-highlight">
              <!-- Example single danger button -->
              <div class="dropdown">
                <a
                  class="btn btn-light dropdown-toggle"
                  role="button"
                  href="#"
                  id="dropdownMenuLink"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  More
                </a>

                <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
		  <li>
                    <a
                      class="dropdown-item"
                      href="https://preetranjan.github.io/pyspark-schema-generator/"
                      >PySpark Schema Generator<span class="badge bg-danger">NEW</span>
                    </a>
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="https://preetranjan.github.io/compare-content/"
                      >Compare Content <span class="badge bg-danger">New</span>
                    </a>
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="https://preetranjan.github.io/compare-json/"
                      >Compare JSON</a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="https://preetranjan.github.io/deep-compare-json/"
                      >Deep Compare JSON</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <!-- <textarea
            autofocus="true"
            id="input-area"
            style="min-width: 100%; font-family: consolas"
            class="form-control text-area shadow fw-bold"
            spellcheck="false"
            placeholder="Your JSON Input here...."
            rows="20"
          ></textarea> -->

          <div
            class="shadow"
            id="container"
            style="min-width: 100%; height: 500px; border: 1px solid grey"
          ></div>
          <div class="container d-flex justify-content-center mt-2">
            <button class="btn btn-primary btn-lg" type="button" id="btnformat">
              Pretify JSON
            </button>
          </div>
        </div>
        <div class="col-md-1"></div>
      </div>

      <small
        >Developed with ‚ù§ By
        <a
          class="fw-bold"
          style="text-decoration: none"
          href="https://github.com/PreetRanjan"
          target="_blank"
          >PREETish</a
        >
      </small>

      <!-- <button type="button" class="btn btn-primary" id="liveToastBtn">Show live toast</button> -->
      <div
        class="toast shadow align-items-center text-white bg-danger border-0 position-absolute p-2 top-50 start-50 translate-middle"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
        id="liveToast"
      >
        <div class="d-flex">
          <div class="toast-body" id="toast-body">Global Error</div>
          <button
            type="button"
            class="btn-close btn-close-white me-2 m-auto"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
      </div>
    </div>
    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <!-- <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script> -->
    <script src="./loader.js"></script>
    <script>
      //require config
      require.config({
        baseUrl:
          "https://microsoft.github.io/monaco-editor/node_modules/monaco-editor/min/",
      });
      //   var sample = { id: 21, name: "PREETish" };
      // make editor
      var editor;
      require(["vs/editor/editor.main"], function () {
        editor = monaco.editor.create(document.getElementById("container"), {
          value: ["{", '"id":21,', '"name":"PREETish"', "}"].join("\n"),
          language: "json",
        });
      });
      //toast code
      let toastEl = document.getElementById("liveToast");
      let option = { autohide: true, delay: 2000 };
      let toast = new bootstrap.Toast(toastEl, option);

      window.onload = () => {
        editor.trigger("editor", "editor.action.formatDocument");
        toast.hide();
      };
      window.onerror = (error) => {
        console.log(error);
        var el = document.getElementById("toast-body");
        el.innerText = error.toString();
        toast.show();
      };

      var formatButton = document.getElementById("btnformat");

      formatButton.addEventListener("click", () => {
        editor.trigger("editor", "editor.action.formatDocument");
      });

      var copyButton = document.getElementById("btncopy");
      copyButton.addEventListener("click", (event) => {
        let inputJson = editor.getValue();
        navigator.clipboard.writeText(inputJson);
        console.log(event.target.innerText);
        event.target.innerText = "Copied";
      });

      //download json
      function download(content, fileName, contentType) {
        var a = document.createElement("a");
        var file = new Blob([content], { type: contentType });
        a.href = URL.createObjectURL(file);
        a.download = fileName;
        a.click();
      }
      var downloadButton = document.getElementById("btn-download");

      downloadButton.addEventListener("click", () => {
        //save json
        var formatedJson = editor.getValue();
	if (formatedJson.length == 0) {
          throw new Error("No input!!");
        }
        let fileName = document.getElementById("header").innerText.trim();
        download(formatedJson, `${fileName}.json`, "text/plain");
      });
    </script>
    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
  <!-- Code injected by live-server -->
</body>
</html>
